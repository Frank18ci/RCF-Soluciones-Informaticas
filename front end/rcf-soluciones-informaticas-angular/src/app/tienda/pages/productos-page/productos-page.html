<div class="container mx-auto my-8 px-4">
    <h1 class="text-center text-3xl font-bold">Catalogo de Productos</h1>
    <p class="text-center text-gray-600">Explora nuestra amplia gama de productos diseñados para satisfacer tus
        necesidades tecnológicas.</p>
    <form [formGroup]="formSearch">
        <div class="grid grid-cols-1 md:grid-cols-8 gap-6 mt-6 items-center">
            <div class="md:col-span-5">
                <input type="search" formControlName="name" placeholder="Buscar productos..."
                    class="w-full p-2 border border-gray-300 rounded mt-4 outline-none focus:ring-2 focus:ring-blue-500" />
            </div>
            <div class="md:col-span-1">
                <select formControlName="categoryId" 
                    class="w-full p-2 border border-gray-300 rounded mt-4 outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="0">Todas las categorías</option>
                    @for(category of categories; track category.id) {
                    <option [value]="category.id">{{ category.name }}</option>
                    }
                </select>
            </div>
            <div class="md:col-span-1 flex flex-col items-center mt-4">
                <label class="mb-2 font-semibold text-gray-700">Rango de Precio</label>
                <mat-slider
                    class="w-full"
                    min="0"
                    [max]="calculateMaxPrice()"
                    step="50"
                    thumbLabel
                    tickInterval="100"
                >
                    <input
                        matSliderStartThumb
                        formControlName="priceMin"
                        [value]="formSearch.value.priceMin"
                    >
                    <input
                        matSliderEndThumb
                        formControlName="priceMax"
                        [value]="formSearch.value.priceMax || calculateMaxPrice()"
                    >
                </mat-slider>
                <div class="flex justify-between w-full text-xs mt-2 text-gray-600">
                    <span>Mín: ${{ formSearch.value.priceMin }}</span>
                    <span>Máx: ${{ formSearch.value.priceMax || calculateMaxPrice() }}</span>
                </div>
            </div>
            <div class="md:col-span-1 flex justify-center items-center mt-4">
                <button (click)="search()"
                    class=" text-white w-full bg-blue-600 hover:bg-blue-700 rounded-lg px-2 py-3 h-full hover:font-semibold transition-transform">Buscar</button>
            </div>
        </div>
    </form>
    <div class="grid sm:grid-cols-2 md:grid-cols-5 xl:grid-cols-6 gap-5 my-6">
        @for(product of products; track product.id) {
        <app-producto [product]="product"></app-producto>
        }
    </div>
</div>